<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>杰出兽的小宇宙</title>
    <link>https://www.jiecs.top/</link>
    
    <image>
      <url>https://www.jiecs.top/favicon.ico</url>
      <title>杰出兽的小宇宙</title>
      <link>https://www.jiecs.top/</link>
    </image>
    
    <atom:link href="https://www.jiecs.top/feed.xml" rel="self" type="application/rss+xml"/>
    
    <description>偶尔写点技术记录，杂谈。杰出兽 jiecs jiecs_23 jiesou</description>
    <pubDate>Thu, 23 Oct 2025 08:27:50 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>城市天际线等游戏在 Linux Wine Proton 中的中文字体方块空白问题</title>
      <link>https://www.jiecs.top/archives/89a6fa5/</link>
      <guid>https://www.jiecs.top/archives/89a6fa5/</guid>
      <pubDate>Mon, 15 Sep 2025 22:38:08 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;原因是有些游戏的中文环境写死了微软雅黑，我目前发现存在这个问题的游戏（公司）有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;城市天际线&lt;/li&gt;
&lt;li&gt;Ndemic Creations 包括瘟疫公司、反叛公司等&lt;/li&gt;
&lt;li&gt;Jutsu Games 包括 911 接线员、112 接线</description>
        
      
      
      
      <content:encoded><![CDATA[<p>原因是有些游戏的中文环境写死了微软雅黑，我目前发现存在这个问题的游戏（公司）有：</p><ul><li>城市天际线</li><li>Ndemic Creations 包括瘟疫公司、反叛公司等</li><li>Jutsu Games 包括 911 接线员、112 接线员等</li></ul><h3 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h3><p>用游戏（城市天际线）本身的 Font Changer 类模组指定字体到思源黑体</p><h3 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h3><p>在 wine 前缀<br>drive_c&#x2F;windows&#x2F;Fonts&#x2F; 下把思源、Noto 等其他字体，软链接或者复制到 msyh.ttf msyh.ttc 等的名字 </p><p>还是不行就，复制一个 Windows 安装下 C:\Windows\Fonts 里的 <strong>全部</strong> 内容（尤其是msyh、simhei、simsun 等）到 wine 前缀</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/Linux/">Linux</category>
      
      <category domain="https://www.jiecs.top/tags/TipsTricks/">TipsTricks</category>
      
      
      <comments>https://www.jiecs.top/archives/89a6fa5/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>久量 DP-9102 手电筒的充电头类别和型号</title>
      <link>https://www.jiecs.top/archives/4c47bd14/</link>
      <guid>https://www.jiecs.top/archives/4c47bd14/</guid>
      <pubDate>Sat, 06 Sep 2025 22:13:15 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;久量 LED 锂电池 验钞充电式手电筒&lt;br&gt;型号：DP-9102&lt;br&gt;LI-ION BATTERY MONEY DETECTOR LED TORCH&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jiecs.top/img/2025/09/100004078</description>
        
      
      
      
      <content:encoded><![CDATA[<p>久量 LED 锂电池 验钞充电式手电筒<br>型号：DP-9102<br>LI-ION BATTERY MONEY DETECTOR LED TORCH</p><p><img src="https://cdn.jiecs.top/img/2025/09/1000040780.webp" alt="包装壳"><br><img src="https://cdn.jiecs.top/img/2025/09/IMG_20250906_220750.webp" alt="包装壳背面说明"><br><img src="https://cdn.jiecs.top/img/2025/09/1000040781.webp" alt="充电器"><br><img src="https://cdn.jiecs.top/img/2025/09/1000040784.webp" alt="本体"></p><hr><p><img src="https://cdn.jiecs.top/img/2025/09/1000040782.webp" alt="充电器"><br><img src="https://cdn.jiecs.top/img/2025/09/IMG_20250906_215419.webp" alt="充电器详细参数"></p><p>充电器（标明的）型号：XW-001<br>输入：AC100V~240V 47&#x2F;63Hz 100mA<br>输出：DC 4.2V 500mA<br>带有一颗 LED 显示充电状态，未充满红灯，已充满绿灯<br>搜索 4.2V 500mA 即可买到兼容的充电器</p><p>是 3.5*1.35mm 偏细长的 DC 口</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%97%A5%E5%B8%B8/">日常</category>
      
      
      <comments>https://www.jiecs.top/archives/4c47bd14/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>ESP-12E ESP-12F ESP12S 和 ESP8266MOD 的区别</title>
      <link>https://www.jiecs.top/archives/910267f4/</link>
      <guid>https://www.jiecs.top/archives/910267f4/</guid>
      <pubDate>Tue, 02 Sep 2025 21:43:24 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;ESP8266 是一小块芯片&lt;br&gt;而带银色屏蔽罩的，是可以用的“模块”，内部集成了小电容、晶振之类的最小系统&lt;br&gt;ESP8266MOD 就是模块的意思，该模块原厂厂家是安信可，但也有很多其他厂商也做一样的兼容模块&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn</description>
        
      
      
      
      <content:encoded><![CDATA[<p>ESP8266 是一小块芯片<br>而带银色屏蔽罩的，是可以用的“模块”，内部集成了小电容、晶振之类的最小系统<br>ESP8266MOD 就是模块的意思，该模块原厂厂家是安信可，但也有很多其他厂商也做一样的兼容模块</p><p><img src="https://cdn.jiecs.top/img/2025/09/Screenshot_20250902-213301_%E6%B7%98%E5%AE%9D.png" alt="screenshot"></p><p>如图， 直观区别主要在最下面一排六个 IO 口的有无、PCB 天线的设计，以及中心一块散热铜。当然模块内部也有些许不同，但大多数情况都是引脚封装兼容、程序通刷的</p><p>发布顺序为：ESP-12E → ESP-12F → ESP-12S</p><p>需要注意的是，ESP-12 下面一排六个 IO 口虽然看着是有，但实际上一般都无法使用。<br>包括官方安信可的手册里，也写了不可用<br><img src="https://cdn.jiecs.top/img/2025/09/Screenshot_20250903-212556_Fennec.png" alt="screenshot"><br>安信可文档 <a href="https://docs.ai-thinker.com/esp8266">https://docs.ai-thinker.com/esp8266</a><br>因为这一排 IO 都用于连接到内置的 SPI flash 了，IO9 IO10 用于四线 SPI 的另外两条线</p><p>还有常见的 ESP-01、 ESP8285、ESP-01S 一般指的是通过串口 AT 协议，可以让不带 WiFi 功能的单片机通过串口交换一定 WiFi 数据的 WiFi 模块</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%97%A5%E5%B8%B8/">日常</category>
      
      <category domain="https://www.jiecs.top/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">嵌入式</category>
      
      
      <comments>https://www.jiecs.top/archives/910267f4/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>通过 distrobox 在任何发行版安装星火应用商店</title>
      <link>https://www.jiecs.top/archives/43e7ecc1/</link>
      <guid>https://www.jiecs.top/archives/43e7ecc1/</guid>
      <pubDate>Mon, 25 Aug 2025 21:07:59 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;首先&quot;&gt;&lt;a href=&quot;#首先&quot; class=&quot;headerlink&quot; title=&quot;首先&quot;&gt;&lt;/a&gt;首先&lt;/h2&gt;&lt;p&gt;由于 WPS 直接在 distrobox 环境下运行我遇到了各种麻烦的问题，于是尝试在 distrobox 中安装星火应用商店，再安装 WP</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h2><p>由于 WPS 直接在 distrobox 环境下运行我遇到了各种麻烦的问题，于是尝试在 distrobox 中安装星火应用商店，再安装 WPS。问题能够解决，于是顺便记录一下 distrobox 中安装星火的过程。总体上还是非常轻松的，十几分钟就能搞定</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><blockquote><p>系统环境为 Bluefin Linux (based-on Fedora Silverblue)</p></blockquote><p>创建 distrobox 使用的是这个 image</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">distrobox create --image quay.io/toolbx/ubuntu-toolbox:latest --name box-spark<br></code></pre></td></tr></table></figure><p>当前的 latest 应该是 24.04 (LTS)<br><code>ubuntu-toolbox</code> 是精简后的 ubuntu image，亲测也足够星火运行的，用完整的 ubuntu image 应当更加没有问题</p><p>默认没有 systemd 支持，而星火应用商店的更新通知（定时检查更新）依赖 systemd，可以通过 distrobox 的 <code>--init</code> flag 实现，但是这会让你<a href="#%E5%85%B3%E4%BA%8E%E4%B8%8E-systemd-%E7%9A%84%E4%B8%8D%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98">用不了中文输入法</a>。所以还是建议不用 systemd</p><p>进入容器命令行之后，正常 apt install <a href="https://www.spark-app.store/">星火应用商店的 .deb</a> 即可，星火应用商店会拖家带口把 qt、dtk、gcc 环境、工具链都装上，占用空间 600M+ 是正常的</p><p>没有什么报错安装完成之后（不装 systemd 的话安装过程会有一个小报错），就可以通过 <code>spark-store</code> 运行图形化的星火应用商店</p><h2 id="Post-fix-Workaround"><a href="#Post-fix-Workaround" class="headerlink" title="Post-fix &amp; Workaround"></a>Post-fix &amp; Workaround</h2><h3 id="第一个问题：中文字体坏的"><a href="#第一个问题：中文字体坏的" class="headerlink" title="第一个问题：中文字体坏的"></a>第一个问题：中文字体坏的</h3><p>这个很好解决：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install fonts-noto-cjk<br></code></pre></td></tr></table></figure><p>或者安装任何你喜欢的字体即可</p><h3 id="第二个问题：点击“下载并安装”，下载之后就没动作了，不会自己安装"><a href="#第二个问题：点击“下载并安装”，下载之后就没动作了，不会自己安装" class="headerlink" title="第二个问题：点击“下载并安装”，下载之后就没动作了，不会自己安装"></a>第二个问题：点击“下载并安装”，下载之后就没动作了，不会自己安装</h3><p>解决方案： <a href="https://gitee.com/spark-store-project/spark-store/issues/IBML1L">https://gitee.com/spark-store-project/spark-store/issues/IBML1L</a><br>即在 distrobox 容器内执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;#!/bin/sh</span><br><span class="hljs-string">sudo &quot;$@&quot;&#x27;</span> | <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /usr/local/bin/pkexec<br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> +x /usr/local/bin/pkexec<br></code></pre></td></tr></table></figure><p>这是因为原本正常安装的星火应用商店，应当在安装过程中通过 <code>pkexec</code> 提升到 root 权限，因为这样可以跳出一个 askpass 图形界面请求用户输入密码。而在容器中一般直接使用 <code>sudo</code>，<code>pkexec</code> 由于各种原因往往没法正常工作。不是完全不可以，但挺麻烦的</p><p>所以以上命令能替换 <code>/usr/local/bin/pkexec</code> 的内容为一个脚本，直接原地将命令丢给 sudo</p><p>由于创建容器的时候就没有用 <code>--root</code> 创建 rootful 容器，所以这个 sudo 出来的 root <em>应该</em> 也不是宿主机的 root，不需要特别在乎安全问题。只要你用 Podman 就完全是 rootless 的</p><h3 id="第三个问题：搜索框没法输入中文"><a href="#第三个问题：搜索框没法输入中文" class="headerlink" title="第三个问题：搜索框没法输入中文"></a>第三个问题：搜索框没法输入中文</h3><p>最简单的 <del>经典</del> 解决方案就是从别的地方打好字然后粘贴进去</p><p>当然也可以选择一步到位。我使用 fcitx5 框架，需要在容器里安装对应前端界面（我也不知道为啥宿主机的 fcitx5 前端在容器里就不工作了）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install fcitx5-frontend-all<br></code></pre></td></tr></table></figure><p>这样安装的只是适用于 qt gtk 等程序的 fcitx5 前端，后端还是通过 D-Bus 连宿主机的（还好 distrobox 上 D-Bus 开箱即用）<br>当然就是要再牺牲掉一些存储空间，fcitx5 也喜欢拖家带口</p><h4 id="关于与-systemd-的不兼容问题"><a href="#关于与-systemd-的不兼容问题" class="headerlink" title="关于与 systemd 的不兼容问题"></a>关于与 systemd 的不兼容问题</h4><p>如果你在创建 distrobox 的时候选择启用了 systemd (init system)，那也会无法输入中文，安装 <code>fcitx5-frontend-all</code> 也没用。这是因为<a href="https://distrobox.it/useful_tips/#using-init-system-inside-a-distrobox">开启 systemd 之后，容器就无法访问宿主机的进程资源了</a></p><blockquote><p>Note however that in this mode, you’ll not be able to access host’s processes from within the container.</p></blockquote><p>你可以通过</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dbus-send --session --dest=org.freedesktop.DBus --<span class="hljs-built_in">type</span>=method_call --print-reply /org/freedesktop/DBus org.freedesktop.DBus.ListNames<br></code></pre></td></tr></table></figure><p>在容器内和主机内列出可用的 DBus 来确认这个问题</p><p>这个问题我还没找到解决办法。但大多数“正常”的程序都是不应该与 systemd 硬耦合的，所以就还是建议不用 systemd</p><p>其他问题目前都还没遇到</p><ul><li>WPS 开箱即用没有任何问题</li><li>能正常用 <code>distrobox-export --app WPS</code> 将 WPS 桌面图标 .desktop 导出到宿主机</li><li>通过星火应用商店安装的 ACE 兼容环境可以在命令行正常进入。这样对于适合安装到 ACE 兼容环境中的软件，问题应当又能解决很多<br>再其他的问题也就是星火应用商店本身的问题了（可不是容器的问题）</li></ul>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/">简单教程</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%97%A5%E5%B8%B8/">日常</category>
      
      <category domain="https://www.jiecs.top/tags/Linux/">Linux</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%88%91%E7%9A%84%E7%94%B5%E8%84%91/">我的电脑</category>
      
      
      <comments>https://www.jiecs.top/archives/43e7ecc1/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>HomeAssistant 通过 OPPO 云服务跟踪一加/OPPO 设备的位置</title>
      <link>https://www.jiecs.top/archives/ae8d6418/</link>
      <guid>https://www.jiecs.top/archives/ae8d6418/</guid>
      <pubDate>Thu, 07 Aug 2025 09:02:45 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;a href=&quot;https://github.com/jiesou/oppo_cloud_tracker&quot;&gt;https://github.com/jiesou/oppo_cloud_tracker&lt;/a&gt;&lt;br&gt;花了两天时间做了一个集成，基本够用了，挂一个 Seleniu</description>
        
      
      
      
      <content:encoded><![CDATA[<p><a href="https://github.com/jiesou/oppo_cloud_tracker">https://github.com/jiesou/oppo_cloud_tracker</a><br>花了两天时间做了一个集成，基本够用了，挂一个 Selenium Docker 容器，然后连连上去就行</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%97%A5%E5%B8%B8/">日常</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%95%99%E7%A8%8B/">教程</category>
      
      
      <comments>https://www.jiecs.top/archives/ae8d6418/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>HomeAssistant 通过 SSH 获取 Intel 主机自己的功耗</title>
      <link>https://www.jiecs.top/archives/5b1dbf96/</link>
      <guid>https://www.jiecs.top/archives/5b1dbf96/</guid>
      <pubDate>Fri, 25 Jul 2025 19:33:42 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;需要使用 &lt;a href=&quot;https://www.home-assistant.io/integrations/command_line&quot;&gt;https://www.home-assistant.io/integrations/command_line&lt;/a&gt; 这个 com</description>
        
      
      
      
      <content:encoded><![CDATA[<p>需要使用 <a href="https://www.home-assistant.io/integrations/command_line">https://www.home-assistant.io/integrations/command_line</a> 这个 commend line 集成，通过命令行输入数据。</p><h2 id="从命令行获取功耗数据"><a href="#从命令行获取功耗数据" class="headerlink" title="从命令行获取功耗数据"></a>从命令行获取功耗数据</h2><p>Intel 一直支持通过 RAPL 获取 CPU 自身的耗电量（电能）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@casaos:/# <span class="hljs-built_in">cat</span> /sys/class/powercap/intel-rapl/intel-rapl:0/name<br>package-0<br>root@casaos:/# <span class="hljs-built_in">cat</span> /sys/class/powercap/intel-rapl/intel-rapl:0/energy_uj<br>134021323469<br></code></pre></td></tr></table></figure><p>这个是 package-0 域的，包含 DRAM、核显，就是整个 SoC 的功耗。</p><p>而 Intel Syklake 之后的版本支持 PSYS 域，即 <code>intel-rapl:1</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@casaos:/# <span class="hljs-built_in">cat</span> /sys/class/powercap/intel-rapl/intel-rapl:1/name<br>psys<br>root@casaos:/# <span class="hljs-built_in">cat</span> /sys/class/powercap/intel-rapl/intel-rapl:1/energy_uj<br>74239569162<br></code></pre></td></tr></table></figure><p>基本上就是全板的功耗了，还包含 SoC 之外设备的功耗（当然不含电源适配器的损耗）</p><h2 id="导入-HomeAssistant"><a href="#导入-HomeAssistant" class="headerlink" title="导入 HomeAssistant"></a>导入 HomeAssistant</h2><p>HomeAssistant 本身命令行的环境是在容器里，各种麻烦。脱离容器最简单的方法是直接 SSH 连主机。而 <code>ssh</code> 不支持非交互式密码认证，那就是说要密钥认证。</p><p>配置好主机的 SSH 密钥认证（这种网上教程太多了，就是 <code>ssh-keygen</code>）之后，把私钥粘贴到 <code>/config/ssh-key</code></p><blockquote><p><code>/homeassistant</code> 基本就是 <code>/config</code> 的软链接，但用 <code>/config</code> 没有问题</p></blockquote><blockquote><p>因为 HomeAssistant Commend Line 执行权限的问题，私钥不能拷到 <code>/root/.ssh</code> 下，虽然 <code>whoami</code> 是 root，但有各种问题</p></blockquote><p>然后最终就是 <code>configuration.yaml</code> 中添加：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">command_line:</span><br>    <span class="hljs-comment"># 主机功率消耗</span><br>    <span class="hljs-comment"># 原单位微焦（uJ），awk 乘以 6 变成焦耳（J）</span><br>    <span class="hljs-comment"># 连接到 casaos，通过私钥实现免密码登录</span><br>    <span class="hljs-comment"># -T 强制非交互式不分配伪终端，同时实现 Ubuntu 登录的欢迎消息不显示</span><br>    <span class="hljs-comment"># 可在命令后添加 2&gt;&amp;1; echo &quot;EXIT_CODE:$?&quot; 手动引导输出 exit code，让错误日志更丰富</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">sensor:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;主机累计电量&quot;</span><br>      <span class="hljs-attr">device_class:</span> <span class="hljs-string">&quot;energy&quot;</span><br>      <span class="hljs-attr">state_class:</span> <span class="hljs-string">&quot;total_increasing&quot;</span><br>      <span class="hljs-attr">unit_of_measurement:</span> <span class="hljs-string">&quot;J&quot;</span><br>      <span class="hljs-attr">scan_interval:</span> <span class="hljs-number">15</span><br>      <span class="hljs-attr">command:</span> <span class="hljs-string">&gt;</span><br><span class="hljs-string">        ssh -i /config/ssh-key -o &quot;StrictHostKeyChecking=no&quot; -T root@casaos.lan</span><br><span class="hljs-string">        &#x27;cat /sys/class/powercap/intel-rapl/intel-rapl:1/energy_uj | awk &quot;&#123;printf \&quot;%.6f\n\&quot;, \$1/1000000&#125;&quot;&#x27;</span><br></code></pre></td></tr></table></figure><p>具体参数设置基本比较清楚了<br>建议获取到单位为焦耳的数据，然后再通过辅助元素，变化率传感器之类的算出功耗。不要直接 bash 输出最终结果</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%8A%80%E6%9C%AF/">技术</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%95%99%E7%A8%8B/">教程</category>
      
      <category domain="https://www.jiecs.top/tags/PVE/">PVE</category>
      
      
      <comments>https://www.jiecs.top/archives/5b1dbf96/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>G4560 HP 400g3 小主机 PVE Windows 核显穿透直连研究日志，以及 PVE 环境如何把 Windows 从 GPT 无损转为 MBR</title>
      <link>https://www.jiecs.top/archives/4522cbac/</link>
      <guid>https://www.jiecs.top/archives/4522cbac/</guid>
      <pubDate>Thu, 24 Jul 2025 03:34:20 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;首先&quot;&gt;&lt;a href=&quot;#首先&quot; class=&quot;headerlink&quot; title=&quot;首先&quot;&gt;&lt;/a&gt;首先&lt;/h2&gt;&lt;p&gt;从实用主义的角度考虑，最简单的方法是 GVT-g 拆分核显，GRUB 里添加个参数就能用，也能实现一定程度上的硬件加速，比如 Chrome </description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h2><p>从实用主义的角度考虑，最简单的方法是 GVT-g 拆分核显，GRUB 里添加个参数就能用，也能实现一定程度上的硬件加速，比如 Chrome 解码视频。</p><p>但拆分核显得到的核显是“无头”，或者说没法绑定显示器的。一些软件，比如 Sunshine 串流。使用虚拟显示器时，出于 Sunshine 方面的问题，<strong>无法通过 QSV 进行硬件加速编码</strong>。<br>RustDesk 是能实现无头核显硬件加速的，但是 RustDesk 的使用体验比较糟糕。</p><p>于是最后只能考虑将整个核显进行穿透，不进行拆分。</p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>G4560 属于 7 代 Kaby Lake。经过一番搜寻，比较可靠、直接的核显穿透方案是 <a href="https://github.com/lixiaoliu666/intel6-14rom/tree/qemu7-9">https://github.com/lixiaoliu666/intel6-14rom/tree/qemu7-9</a>。<br>其中 <code>master</code> 分支下的 README 仅适用于 QEMU 10，需要换到作者提供的 QEMU、KVM 包（<a href="https://github.com/lixiaoliu666/pve-anti-detection">https://github.com/lixiaoliu666/pve-anti-detection</a>）<br>而 <code>qemu7-9</code> 分支下的 README <strong>适用于 QEMU 9.2</strong>，这样就不需要换 KVM，对原 PVE 环境的影响更小。所以选择这个分支。<br>我的环境是</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@400g3pve:~# pveversion <br>pve-manager/8.4.1/2a5fa54a8503f96d (running kernel: 6.8.12-11-pve)<br>root@400g3pve:~# qemu-system-x86_64 --version<br>QEMU emulator version 9.2.0 (pve-qemu-kvm_9.2.0-5)<br>Copyright (c) 2003-2024 Fabrice Bellard and the QEMU Project developers<br></code></pre></td></tr></table></figure><p>具体配置方式，在作者 李晓流 的专栏，以及 README 里以及写得很清楚了。也可以部分参考 <a href="https://imacos.top/2025/06/09/pve-intel-6-14-q35">https://imacos.top/2025/06/09/pve-intel-6-14-q35</a>。</p><p>总之：主要参考 <a href="https://www.bilibili.com/opus/1067771179546181639">https://www.bilibili.com/opus/1067771179546181639</a> 里 <strong>qemu 9.2</strong> 的部分。</p><hr><p>注意：</p><ul><li><code>hostpci0</code> 里不需要 <code>legacy-igd=1</code>。</li><li>下载 .rom 文件的时候要下载 Releases 里 V1.0 的，即 <a href="https://github.com/lixiaoliu666/intel6-14rom/releases/tag/v1.0-20250413-161986">https://github.com/lixiaoliu666/intel6-14rom/releases/tag/v1.0-20250413-161986</a>，这个版本才支持 QEMU 9.2，V2.0 是 QEMU 10 的。就下载 <code>6-14.rom</code> 大全版本即可，放到 <code>/usr/share/kvm/</code> 目录下。</li></ul><hr><p>我最终的 .conf 如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">agent: 1<br>args: -<span class="hljs-built_in">set</span> device.hostpci0.bus=pcie.0 -<span class="hljs-built_in">set</span> device.hostpci0.addr=02.0 -<span class="hljs-built_in">set</span> device.hostpci0.x-igd-gms=0x2 -<span class="hljs-built_in">set</span> device.hostpci0.x-igd-opregion=on<br>boot: order=scsi0;net0;ide0<br>cores: 4<br>cpu: host<br>hostpci0: 0000:00:02.0,pcie=1,romfile=6-14.rom,x-vga=1<br>machine: q35<br>memory: 4096<br>meta: creation-qemu=9.2.0,ctime=1749979104<br>name: win<br>net0: virtio=BC:24:11:44:71:AA,bridge=vmbr0,firewall=1<br>numa: 1<br>ostype: l26<br>scsi0: local-lvm:vm-103-disk-1,discard=on,iothread=1,size=32G,ssd=1<br>scsihw: virtio-scsi-single<br>smbios1: uuid=8072d170-12f0-4aa5-86ef-f10471bb4282<br>sockets: 1<br>tpmstate0: local-lvm:vm-103-disk-2,size=4M,version=v2.0<br>vmgenid: 0288c536-37d1-4615-95f9-69e1663584a7<br></code></pre></td></tr></table></figure><p>接着，你会发现我的配置里没有 <code>bios:ovmf</code>，这意味着它会以默认的 SeaBIOS 进行 Legacy 启动。</p><p>这是因为我这台 G4560 和作者 README 里描述的情况一致：</p><blockquote><p>有些机器他还是有小bug的，会和这个项目 <a href="https://github.com/my33love/gk41-pve-ovmf">https://github.com/my33love/gk41-pve-ovmf</a> 中的描述症状一样：WIN10 直通安装没有任何问题，可以正常直通到物理显示器，但是一旦<strong>装了UHD驱动就黑屏</strong>了，只能RDP远程进去，暂时没找到解决办法！ubuntu测试完美，直通安装与安装完显示器都能在4K 60HZ下工作。我在j4105机器上遇见一样的问题，不管是用最新的6-10代核显驱动还是2019年及以前发布的6-10代核显驱动，只要一驱动了必黑屏。这是前人源代码埋下来的坑，快4年了无人解决，我也解决不了，找我没用。有网友反馈<strong>驱动黑屏问题是因为硬盘分区表问题，用mbr就可以了</strong>，我估计4-10代如果安装核显后驱动黑屏，大家可以试下安装的时候硬盘用mbr，实在不会就选择ide硬盘给win10虚拟机试试，如果能解决记得反馈。</p><p><a href="https://github.com/lixiaoliu666/intel6-14rom/tree/qemu7-9#:~:text=%E4%BD%86%E6%98%AF%E5%91%A2%E6%9C%89%E4%BA%9B,%E8%A7%A3%E5%86%B3%E8%AE%B0%E5%BE%97%E5%8F%8D%E9%A6%88%E3%80%82">（原文）</a></p></blockquote><p>即设备管理器里可以看到物理视频口所输出的显示器，但显示器就是不显示，没信号，黑屏。然后 RDP 能显示，而 Sunshine 串流也是和物理显示器一样直接串出个黑屏。</p><p>所以为了解决这个问题，Windows VM 的硬盘分区表必须是 MBR，这也意味着 Windows 必须不能是 GPT+OVMF (UEFI) 启动的，而必须是 MBR+SeaBIOS (Legacy) 启动的。</p><p>对于已经装好了的 Windows，实际上有很多方式可以无损从 UEFI 转到 Legacy。这里进行介绍。</p><h2 id="把-PVE-里的-Windows-VM-从-GPT-无损转为-MBR"><a href="#把-PVE-里的-Windows-VM-从-GPT-无损转为-MBR" class="headerlink" title="把 PVE 里的 Windows VM 从 GPT 无损转为 MBR"></a>把 PVE 里的 Windows VM 从 GPT 无损转为 MBR</h2><p>主要麻烦的就是 PVE 的 VirtIO SCSI 驱动，很多 PE 不支持，没法认出 Windows 系统磁盘。</p><p>调整分区和引导方式的时候，建议把之前核显直通的配置先删掉，改用默认显示。<br>我这里使用 <a href="https://down.edgeless.top/">Edgeless</a> 没有问题。微 PE 精简太多了，VirtIO SCSI 的驱动支持有问题。</p><blockquote><p>Edgeless 可以直接用设备管理器装好驱动。而另外，理论上也能通过 Dism&#x2F;Dism++ 直接把驱动做到 PE 镜像里，但要拆 ISO 什么的，我没成功过</p></blockquote><p>上 PE 需要和以往一样添加一个 IDE 的 CD&#x2F;DVD 驱动器，把 Edgeless 的 .iso 挂载上去。并在选项里调整引导顺序（也可在开机时按 Esc 选择启动项）</p><p>Edgeless 里要添加 VirtIO SCSI 驱动是很简单的：</p><ol><li>确保先也通过 CD&#x2F;DVD 驱动器的方式挂载了 virtio 驱动的 .iso（例如 virtio-win-0.1.271.iso）</li><li>设备管理器里，找到那个未识别的 SCSI 控制器。</li><li>右键，更新驱动程序，浏览我的电脑以查找驱动程序。<br>选择这个 <code>vioscsi</code> 驱动<br><img src="https://cdn.jiecs.top/img/2025/07/%E6%88%AA%E5%9B%BE_2025-07-24_03-18-37.png" alt="选择目录 E:\vioscsi\win10\amd64"></li><li>装上驱动之后，就能通过 DiskGenius 将分区表改为 MBR</li><li>如下图，可以把前面两个 FAT32 和“XENIX”的 EFI 小分区删掉，Legacy 启动不需要小分区<br><img src="https://cdn.jiecs.top/img/2025/07/%E6%88%AA%E5%9B%BE_2025-07-24_00-51-09.png" alt="四个分区，分别是 EFI 分区、Microsoft 保留分区 (MSR)、系统 C 盘、WinRE 分区"></li><li>同理，pve vm 的 .conf 里的 <code>efidisk: local-lvm:vm-103-disk-0,efitype=4m,size=4M</code> 这行也可以删掉了。<code>efidisk</code> 是给 EFI 用的</li><li>然后，使用 Edgeless 的 IQI 引导修复即可一键恢复 Legacy 引导。如果修复不了，尝试使用“理顺盘符”，要确保 C 盘在 PE 里的盘符也的确是 C 盘</li></ol><p>引导修复完成，先尝试进一下看看 Windows 能不能启动。然后就可以恢复之前核显直通的配置，重新 <code>display: none</code>。</p><p>再次启动 Windows，理论上物理显示器就能看到 Windows 的画面了。还是无信号、黑屏的话就插拔一下 DP 线，反正我是可以了。</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/">简单教程</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%8A%80%E6%9C%AF/">技术</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%95%99%E7%A8%8B/">教程</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%88%91%E7%9A%84%E7%94%B5%E8%84%91/">我的电脑</category>
      
      <category domain="https://www.jiecs.top/tags/PVE/">PVE</category>
      
      <category domain="https://www.jiecs.top/tags/%E5%A5%BD%E6%96%87/">好文</category>
      
      
      <comments>https://www.jiecs.top/archives/4522cbac/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>GK905 LK 光轴 网吧键盘 Fn 按键灯效功能图</title>
      <link>https://www.jiecs.top/archives/c3965c3d/</link>
      <guid>https://www.jiecs.top/archives/c3965c3d/</guid>
      <pubDate>Tue, 22 Jul 2025 09:41:29 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;&lt;img src=&quot;https://cdn.jiecs.top/img/2025/07/964-IMG_20250722_093641.webp&quot; alt=&quot;GK905 LK光轴 灯效功能图&quot;&gt;&lt;/p&gt;
</description>
        
      
      
      
      <content:encoded><![CDATA[<p><img src="https://cdn.jiecs.top/img/2025/07/964-IMG_20250722_093641.webp" alt="GK905 LK光轴 灯效功能图"></p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%97%A5%E5%B8%B8/">日常</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%88%91%E7%9A%84%E7%94%B5%E8%84%91/">我的电脑</category>
      
      
      <comments>https://www.jiecs.top/archives/c3965c3d/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>exFAT 调整大小时，bitmap 的故障</title>
      <link>https://www.jiecs.top/archives/7a52ff22/</link>
      <guid>https://www.jiecs.top/archives/7a52ff22/</guid>
      <pubDate>Sun, 20 Jul 2025 14:13:36 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;在我想把 exFAT 换成 ext4 的过程中遇到了太多的坑，于是在这里记录一下&lt;/p&gt;
&lt;p&gt;首先 exFAT 设计出来，就不是能被轻松调整大小的。包括 Windows 磁盘管理、GParted，甚至傲梅分区助手都没法改它大小&lt;br&gt;常见的，只有 DiskGenius 能</description>
        
      
      
      
      <content:encoded><![CDATA[<p>在我想把 exFAT 换成 ext4 的过程中遇到了太多的坑，于是在这里记录一下</p><p>首先 exFAT 设计出来，就不是能被轻松调整大小的。包括 Windows 磁盘管理、GParted，甚至傲梅分区助手都没法改它大小<br>常见的，只有 DiskGenius 能改大小</p><p>然后我改大小，又报各种文件系统错误，不让我改，DiskGenius 自己又没法修复 exFAT 的错误<br>fsck 修掉了几个问题，留下几个问题。最后就剩一个顽固的问题。就是：<br>$Bitmap中有标记为已使用的未用簇</p><p>Windows 的 chkdsk 也不行，说自己修好了，但总是能检查出一样的问题</p><p>翻遍网络找到这个：<a href="https://www.reddit.com/r/datarecovery/comments/tbs708/comment/ipny7b5">https://www.reddit.com/r/datarecovery/comments/tbs708/comment/ipny7b5</a><br>好像是最接近真相的<br>就是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs batch">chkdsk X: /f /x /freeorphanedchains<br></code></pre></td></tr></table></figure><p>结果我试了还是不行</p><p>最后，参照 Reddit 里别的帖子，用 DiskGenius 的前身 PartitionGuru 解决了问题</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E6%97%A5%E5%B8%B8/">日常</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%88%91%E7%9A%84%E7%94%B5%E8%84%91/">我的电脑</category>
      
      <category domain="https://www.jiecs.top/tags/TipsTricks/">TipsTricks</category>
      
      
      <comments>https://www.jiecs.top/archives/7a52ff22/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Linux Proton DXVK 转译运行《幽灵行者2》，新画面加载时卡顿</title>
      <link>https://www.jiecs.top/archives/5771df32/</link>
      <guid>https://www.jiecs.top/archives/5771df32/</guid>
      <pubDate>Tue, 08 Jul 2025 20:28:47 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;如果是着色器编译导致&lt;br&gt;解决办法，设置环境变量&lt;br&gt;&lt;code&gt;__GL_SHADER_DISK_CACHE_SKIP_CLEANUP=1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;然而，也可能是 Resizable BAR 的兼容性问题&lt;br&gt;即 Linux 上的 kernel </description>
        
      
      
      
      <content:encoded><![CDATA[<p>如果是着色器编译导致<br>解决办法，设置环境变量<br><code>__GL_SHADER_DISK_CACHE_SKIP_CLEANUP=1</code></p><p>然而，也可能是 Resizable BAR 的兼容性问题<br>即 Linux 上的 kernel lockdown 与 PCIE Resizable BAR 是冲突的 而且开启 ReBAR 反而会大幅影响性能。就反映在那种对显存需求大的游戏上（比如《Ghostrunner 2》），加载新画面会卡好久。<br>同时现在 kernel lockdown 在安全启动的电脑上，都是默认开着的。所以这个问题常常被忽略<br>参见：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ man kernel_lockdown.7<br>提示会影响：       •  The use of direct PCI BAR access.<br></code></pre></td></tr></table></figure><p><a href="https://www.reddit.com/r/linux_gaming/comments/v58ts5/quick_heads_up_about_something_i_discovered">https://www.reddit.com/r/linux_gaming/comments/v58ts5/quick_heads_up_about_something_i_discovered</a><br>解决办法：<br>关掉 UEFI&#x2F;BIOS 里的 Resizable BAR<br>或者关闭安全启动（关闭 kernel lockdown）</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/Linux/">Linux</category>
      
      <category domain="https://www.jiecs.top/tags/%E6%88%91%E7%9A%84%E7%94%B5%E8%84%91/">我的电脑</category>
      
      <category domain="https://www.jiecs.top/tags/TipsTricks/">TipsTricks</category>
      
      
      <comments>https://www.jiecs.top/archives/5771df32/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>PVE 在裸金属机上通过 ALSA 播放声音</title>
      <link>https://www.jiecs.top/archives/8fd95410/</link>
      <guid>https://www.jiecs.top/archives/8fd95410/</guid>
      <pubDate>Sat, 14 Jun 2025 20:14:25 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;PVE 图形界面中 后端驱动器：无（虚拟设备）表示 qemu 收到音频数据就丢弃，只是做一个假音频设备而已。&lt;/p&gt;
&lt;p&gt;需要自己设置 qemu 参数来传输到宿主机的 ALSA 上。&lt;/p&gt;
&lt;p&gt;编辑&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;</description>
        
      
      
      
      <content:encoded><![CDATA[<p>PVE 图形界面中 后端驱动器：无（虚拟设备）表示 qemu 收到音频数据就丢弃，只是做一个假音频设备而已。</p><p>需要自己设置 qemu 参数来传输到宿主机的 ALSA 上。</p><p>编辑</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nano /etc/pve/qemu-server/103.conf<br></code></pre></td></tr></table></figure><p>添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">args: -audiodev alsa,<span class="hljs-built_in">id</span>=alsa0 -device intel-hda -device hda-duplex,audiodev=alsa0<br></code></pre></td></tr></table></figure><p>可以 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt install alsa-utils<br>aplay -l<br></code></pre></td></tr></table></figure><p>检查宿主机 alsa 识别到的设备<br>还能使用 <code>alsamixer</code> TUI 工具调节音量、静音之类的</p><p>QEMU 可以通过</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">qemu-system-x86_64 -audiodev <span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><p>来查看可用的音频后端驱动</p><p>还有</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">qemu-system-x86_64 -device <span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><p>查看所有可用的前端音频设备</p><p>[[[想做 2.5G 虚拟化软路由_725]]]</p>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/TipsTricks/">TipsTricks</category>
      
      <category domain="https://www.jiecs.top/tags/PVE/">PVE</category>
      
      
      <comments>https://www.jiecs.top/archives/8fd95410/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>三相电源的理解</title>
      <link>https://www.jiecs.top/archives/a997eaac/</link>
      <guid>https://www.jiecs.top/archives/a997eaac/</guid>
      <pubDate>Fri, 30 May 2025 22:12:50 GMT</pubDate>
      
        
        
      <description>&lt;h2 id=&quot;星三角的相与线电压电流转换&quot;&gt;&lt;a href=&quot;#星三角的相与线电压电流转换&quot; class=&quot;headerlink&quot; title=&quot;星三角的相与线电压电流转换&quot;&gt;&lt;/a&gt;星三角的相与线电压电流转换&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;特性&lt;/</description>
        
      
      
      
      <content:encoded><![CDATA[<h2 id="星三角的相与线电压电流转换"><a href="#星三角的相与线电压电流转换" class="headerlink" title="星三角的相与线电压电流转换"></a>星三角的相与线电压电流转换</h2><table><thead><tr><th>特性</th><th>星形接法 (Y)</th><th>三角形接法 (Δ)</th><th>比例 (Δ:Y) （基于相同 $U_L$ 和相同 $Z_P$）</th></tr></thead><tbody><tr><td>相电压</td><td>$U_P &#x3D; \dfrac{U_L}{\sqrt{3}}$</td><td>$U_P &#x3D; U_L$</td><td>$\sqrt{3} : 1$</td></tr><tr><td>相电流</td><td>$I_P &#x3D; I_L$</td><td>$I_P &#x3D; \dfrac{I_L}{\sqrt{3}}$</td><td>$\sqrt{3} : 1$</td></tr><tr><td>线电压</td><td>$U_L &#x3D; \sqrt{3} , U_P$</td><td>$U_L &#x3D; U_P$</td><td>$1 : 1$ （基准）</td></tr><tr><td>线电流</td><td>$I_L &#x3D; I_P &#x3D; \dfrac{U_L}{\sqrt{3} , Z_P}$</td><td>$I_L &#x3D; \sqrt{3} , I_P &#x3D; \dfrac{\sqrt{3} , U_L}{Z_P}$</td><td>$3 : 1$</td></tr><tr><td>功率</td><td>$P_Y &#x3D; \dfrac{U_L^2}{Z_P} \cdot \cos\phi$</td><td>$P_\Delta &#x3D; 3\dfrac{U_L^2}{Z_P} \cdot \cos\phi$</td><td>$3 : 1$</td></tr></tbody></table><p>三角形<strong>相电压</strong>等于电源两条相线间的<strong>线电压</strong> 380V<br>$U_P &#x3D; U_L$</p><p>星形<strong>相电压</strong>等于电源的单<strong>相电压</strong> 220V<br>$U_L &#x3D; U_P$</p><hr><h2 id="总有功功率的计算"><a href="#总有功功率的计算" class="headerlink" title="总有功功率的计算"></a>总有功功率的计算</h2><h3 id="通用公式"><a href="#通用公式" class="headerlink" title="通用公式"></a>通用公式</h3><p>用相参数公式表示：<br>$$<br>P &#x3D; 3 \cdot U_P \cdot I_P \cdot \cos\phi<br>$$<br>用线参数表示：<br>$$<br>P &#x3D; \sqrt{3} \cdot U_L \cdot I_L \cdot \cos\phi<br>$$<br>以上公式无论星&#x2F;三角都适用。</p><h4 id="线参数功率推导：星形接法（Y）"><a href="#线参数功率推导：星形接法（Y）" class="headerlink" title="线参数功率推导：星形接法（Y）"></a>线参数功率推导：星形接法（Y）</h4><p>我们知道星形接法中线参数与相参数的关系：</p><ul><li>$U_L &#x3D; \sqrt{3} , U_P \quad \Rightarrow \quad U_P &#x3D; \dfrac{U_L}{\sqrt{3}}$</li><li>$I_L &#x3D; I_P$</li></ul><p>将这些关系代入相参数的总功率公式 $P_Y &#x3D; 3 \cdot U_P \cdot I_P \cdot \cos\phi$：</p><p>$$<br>P_Y &#x3D; 3 \cdot \left( \dfrac{U_L}{\sqrt{3}} \right) \cdot I_L \cdot \cos\phi \<br>&#x3D; \left( \dfrac{3}{\sqrt{3}} \right) \cdot U_L \cdot I_L \cdot \cos\phi \<br>&#x3D; \sqrt{3} \cdot U_L \cdot I_L \cdot \cos\phi<br>$$</p><h4 id="线参数功率推导：三角形接法-Δ"><a href="#线参数功率推导：三角形接法-Δ" class="headerlink" title="线参数功率推导：三角形接法 (Δ)"></a>线参数功率推导：三角形接法 (Δ)</h4><p>我们知道三角形接法中线参数与相参数的关系：</p><ul><li>$U_L &#x3D; U_P$</li><li>$I_L &#x3D; \sqrt{3} , I_P \quad \Rightarrow \quad I_P &#x3D; \dfrac{I_L}{\sqrt{3}}$</li></ul><p>将这些关系代入相参数的总功率公式 $P_\Delta &#x3D; 3 \cdot U_P \cdot I_P \cdot \cos\phi$：</p><p>$$<br>P_\Delta &#x3D; 3 \cdot U_L \cdot \left( \dfrac{I_L}{\sqrt{3}} \right) \cdot \cos\phi \<br>&#x3D; \left( \dfrac{3}{\sqrt{3}} \right) \cdot U_L \cdot I_L \cdot \cos\phi \<br>&#x3D; \sqrt{3} \cdot U_L \cdot I_L \cdot \cos\phi<br>$$</p><p><strong>由此可见：</strong> 无论星&#x2F;三角的连接，无论用相参数还是线参数求，总有功功率<strong>计算方式</strong>都一样。</p><p><strong>同时：</strong><br>$$<br>S_{(视在)} &#x3D; 3 \cdot U_P \cdot I_P \cdot &#x3D; \sqrt{3} \cdot U_L \cdot I_L<br>$$<br>但如果 $U_L$（380V）、$Z_P$ 不变，那不同接法产生不同相电压和电流，总功率就不一样了。</p><hr><h4 id="最后，按照-U-L-、-Z-P-不变，来计算两种接法，总有功功率的比。"><a href="#最后，按照-U-L-、-Z-P-不变，来计算两种接法，总有功功率的比。" class="headerlink" title="最后，按照 $U_L$、$Z_P$ 不变，来计算两种接法，总有功功率的比。"></a>最后，按照 $U_L$、$Z_P$ 不变，来计算两种接法，总有功功率的比。</h4><p>这里的 $I_L$ 已经因为接法不同而发生了变化。</p><h5 id="星形接法-Y-的功率-P-Y-："><a href="#星形接法-Y-的功率-P-Y-：" class="headerlink" title="星形接法 (Y) 的功率 ($P_Y$)："></a><strong>星形接法 (Y) 的功率 ($P_Y$)：</strong></h5><p>$$<br>P_Y &#x3D; \sqrt{3} U_L I_{L,Y} \cos\phi<br>$$<br>把 $I_{L,Y}$ 替换进去：<br>$$<br>P_Y &#x3D; \sqrt{3} U_L \cdot \left[\frac{U_L}{\sqrt{3} Z_P}\right] \cos\phi<br>$$<br>$$<br>P_Y &#x3D; \left(\frac{U_L^2}{Z_P}\right) \cos\phi<br>$$</p><h5 id="三角形接法-Δ-的功率-P-Delta-："><a href="#三角形接法-Δ-的功率-P-Delta-：" class="headerlink" title="三角形接法 (Δ) 的功率 ($P_\Delta$)："></a><strong>三角形接法 (Δ) 的功率 ($P_\Delta$)：</strong></h5><h2 id="P-Delta-sqrt-3-U-L-I-L-Delta-cos-phi-把-I-L-Delta-替换进去：-P-Delta-sqrt-3-U-L-cdot-left-sqrt-3-cdot-frac-U-L-Z-P-right-cos-phi-P-Delta-3-left-frac-U-L-2-Z-P-right-cos-phi-现在对比-P-Delta-和-P-Y-：-P-Delta-P-Y-left-3-cdot-frac-U-L-2-Z-P-cos-phi-right-left-frac-U-L-2-Z-P-cos-phi-right-比例：-P-Delta-P-Y-3-1"><a href="#P-Delta-sqrt-3-U-L-I-L-Delta-cos-phi-把-I-L-Delta-替换进去：-P-Delta-sqrt-3-U-L-cdot-left-sqrt-3-cdot-frac-U-L-Z-P-right-cos-phi-P-Delta-3-left-frac-U-L-2-Z-P-right-cos-phi-现在对比-P-Delta-和-P-Y-：-P-Delta-P-Y-left-3-cdot-frac-U-L-2-Z-P-cos-phi-right-left-frac-U-L-2-Z-P-cos-phi-right-比例：-P-Delta-P-Y-3-1" class="headerlink" title="$$P_\Delta &#x3D; \sqrt{3} U_L I_{L,\Delta} \cos\phi$$把 $I_{L,\Delta}$ 替换进去：$$P_\Delta &#x3D; \sqrt{3} U_L \cdot \left[\sqrt{3} \cdot \frac{U_L}{Z_P}\right] \cos\phi$$$$P_\Delta &#x3D; 3 \left(\frac{U_L^2}{Z_P}\right) \cos\phi$$现在对比 $P_\Delta$ 和 $P_Y$：$$P_\Delta : P_Y &#x3D; \left[3 \cdot \frac{U_L^2}{Z_P} \cos\phi\right] : \left[\frac{U_L^2}{Z_P} \cos\phi\right]$$比例：$$P_\Delta : P_Y &#x3D; 3 : 1$$"></a>$$<br>P_\Delta &#x3D; \sqrt{3} U_L I_{L,\Delta} \cos\phi<br>$$<br>把 $I_{L,\Delta}$ 替换进去：<br>$$<br>P_\Delta &#x3D; \sqrt{3} U_L \cdot \left[\sqrt{3} \cdot \frac{U_L}{Z_P}\right] \cos\phi<br>$$<br>$$<br>P_\Delta &#x3D; 3 \left(\frac{U_L^2}{Z_P}\right) \cos\phi<br>$$<br><strong>现在对比 $P_\Delta$ 和 $P_Y$：</strong><br>$$<br>P_\Delta : P_Y &#x3D; \left[3 \cdot \frac{U_L^2}{Z_P} \cos\phi\right] : \left[\frac{U_L^2}{Z_P} \cos\phi\right]<br>$$<br>比例：<br>$$<br>P_\Delta : P_Y &#x3D; 3 : 1<br>$$</h2><p>但请记住：</p><ol><li>线电压在两种接法下是相同的（这是我们设定的比较前提）。所以电压的比值在这里是 1:1。</li><li>真正有 $\sqrt{3}$ 倍关系的，是相电压和相电流。</li><li>线电流之所以差 3 倍，是因为它受到了两个 $\sqrt{3}$ 因素的影响：</li></ol><ul><li>相电压的 $\sqrt{3}$ 倍关系：三角形接法下相电压比星形接法高 $\sqrt{3}$ 倍，导致相电流高 $\sqrt{3}$ 倍。</li><li>三角形接法中线电流和相电流的 $\sqrt{3}$ 倍关系：三角形接法中线电流是相电流的 $\sqrt{3}$ 倍，而星形接法中线电流等于相电流。<br>这两个 $\sqrt{3}$ 叠加起来，就变成了 $\sqrt{3} \times \sqrt{3} &#x3D; 3$ 倍。</li></ul><p>所以，<strong>功率的 3 倍关系，正是来自线电流的 3 倍关系</strong>，而线电压在比较前提下是相同的。</p><hr><h3 id="关于相电压线电压和向量"><a href="#关于相电压线电压和向量" class="headerlink" title="关于相电压线电压和向量"></a>关于相电压线电压和向量</h3><p>三相电，<em>单相电压</em>依旧是 220V，但相位相差 120°。所以，两相之间的<em>线电压</em>通过向量叠加，可得为 380V。</p><h3 id="关于向量叠加-中性线电流理解"><a href="#关于向量叠加-中性线电流理解" class="headerlink" title="关于向量叠加-中性线电流理解"></a>关于向量叠加-中性线电流理解</h3><p><img src="https://cdn.jiecs.top/img/2025/05/560-Screenshot_20250530-213001_PiliPlus~4.webp" alt="三相 中性线 电流计算"><br>来自：</p><blockquote><p>三相交流电路相电压、相电流、中性线电流的计算方法及相量图的画法 UP主: 长风的慢生活 - <a href="https://www.bilibili.com/video/BV1rm4y137aw">https://www.bilibili.com/video/BV1rm4y137aw</a> 2:06</p></blockquote>]]></content:encoded>
      
      
      <category domain="https://www.jiecs.top/categories/%E5%8A%A8%E6%80%81/">动态</category>
      
      
      <category domain="https://www.jiecs.top/tags/%E5%AD%A6%E4%B9%A0/">学习</category>
      
      <category domain="https://www.jiecs.top/tags/AI/">AI</category>
      
      
      <comments>https://www.jiecs.top/archives/a997eaac/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
